
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AAct is a Python library for building asynchronous communicative actors.">
      
      
      
        <link rel="canonical" href="https://aact.dev/latest/api/nodes/">
      
      
        <link rel="prev" href="../../usage/">
      
      
        <link rel="next" href="../messages/">
      
      
      <link rel="icon" href="../../assets/favicon.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.43">
    
    
      
        <title>Nodes - AAct</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Nodes - AAct" >
      
        <meta  property="og:description"  content="AAct is a Python library for building asynchronous communicative actors." >
      
        <meta  property="og:image"  content="https://aact.dev/latest/assets/images/social/api/nodes.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://aact.dev/latest/api/nodes/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Nodes - AAct" >
      
        <meta  name="twitter:description"  content="AAct is a Python library for building asynchronous communicative actors." >
      
        <meta  name="twitter:image"  content="https://aact.dev/latest/assets/images/social/api/nodes.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aact.Node" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AAct" class="md-header__button md-logo" aria-label="AAct" data-md-component="logo">
      
  <img src="../../assets/aact.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AAct
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Nodes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="amber"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c3.87 0 7 3.13 7 7 0 2.38-1.19 4.47-3 5.74V17c0 .55-.45 1-1 1H6c-.55 0-1-.45-1-1v-2.26C3.19 13.47 2 11.38 2 9c0-3.87 3.13-7 7-7M6 21v-1h6v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1M9 4C6.24 4 4 6.24 4 9c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58 0-2.76-2.24-5-5-5m10 9h-2l-3.2 9h1.9l.7-2h3.2l.7 2h1.9zm-2.15 5.65L18 15l1.15 3.65z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ProKil/aact" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ProKil/aact
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  Get Started

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../usage/" class="md-tabs__link">
        
  
    
  
  Usage

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  API Documentation

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../applications/robot-teleoperation/" class="md-tabs__link">
          
  
  Applications

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AAct" class="md-nav__button md-logo" aria-label="AAct" data-md-component="logo">
      
  <img src="../../assets/aact.svg" alt="logo">

    </a>
    AAct
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ProKil/aact" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    ProKil/aact
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Get Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Welcome to AAct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../why/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why use AAct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    AAct
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            AAct
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Nodes
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Nodes
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aact.Node" class="md-nav__link">
    <span class="md-ellipsis">
      Node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.Node--built-in-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--common-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Common usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.Node--send-messages-on-your-own" class="md-nav__link">
    <span class="md-ellipsis">
      Send messages on your own
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--customize-set-up-and-tear-down" class="md-nav__link">
    <span class="md-ellipsis">
      Customize set up and tear down
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--background-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Background tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--shutdown-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Shutdown nodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shutdown nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.Node--experimental-feature-peer-stopping" class="md-nav__link">
    <span class="md-ellipsis">
      Experimental feature: Peer-stopping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.input_channel_types" class="md-nav__link">
    <span class="md-ellipsis">
      input_channel_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.output_channel_types" class="md-nav__link">
    <span class="md-ellipsis">
      output_channel_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.node_name" class="md-nav__link">
    <span class="md-ellipsis">
      node_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.redis_url" class="md-nav__link">
    <span class="md-ellipsis">
      redis_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.r" class="md-nav__link">
    <span class="md-ellipsis">
      r
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.pubsub" class="md-nav__link">
    <span class="md-ellipsis">
      pubsub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.event_loop" class="md-nav__link">
    <span class="md-ellipsis">
      event_loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.event_handler" class="md-nav__link">
    <span class="md-ellipsis">
      event_handler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aact.NodeFactory" class="md-nav__link">
    <span class="md-ellipsis">
      NodeFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NodeFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.NodeFactory.registry" class="md-nav__link">
    <span class="md-ellipsis">
      registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.NodeFactory.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.NodeFactory.make" class="md-nav__link">
    <span class="md-ellipsis">
      make
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../messages/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Messages
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    AAct CLI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            AAct CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Applications
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Applications
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Robotics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Robotics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../applications/robot-teleoperation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Robot Teleoperation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aact.Node" class="md-nav__link">
    <span class="md-ellipsis">
      Node
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Node">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.Node--built-in-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Built-in Nodes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--common-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Common usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.Node--send-messages-on-your-own" class="md-nav__link">
    <span class="md-ellipsis">
      Send messages on your own
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--customize-set-up-and-tear-down" class="md-nav__link">
    <span class="md-ellipsis">
      Customize set up and tear down
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--background-tasks" class="md-nav__link">
    <span class="md-ellipsis">
      Background tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node--shutdown-nodes" class="md-nav__link">
    <span class="md-ellipsis">
      Shutdown nodes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shutdown nodes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.Node--experimental-feature-peer-stopping" class="md-nav__link">
    <span class="md-ellipsis">
      Experimental feature: Peer-stopping
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.input_channel_types" class="md-nav__link">
    <span class="md-ellipsis">
      input_channel_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.output_channel_types" class="md-nav__link">
    <span class="md-ellipsis">
      output_channel_types
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.node_name" class="md-nav__link">
    <span class="md-ellipsis">
      node_name
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.redis_url" class="md-nav__link">
    <span class="md-ellipsis">
      redis_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.model_config" class="md-nav__link">
    <span class="md-ellipsis">
      model_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.r" class="md-nav__link">
    <span class="md-ellipsis">
      r
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.pubsub" class="md-nav__link">
    <span class="md-ellipsis">
      pubsub
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.logger" class="md-nav__link">
    <span class="md-ellipsis">
      logger
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.event_loop" class="md-nav__link">
    <span class="md-ellipsis">
      event_loop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.Node.event_handler" class="md-nav__link">
    <span class="md-ellipsis">
      event_handler
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aact.NodeFactory" class="md-nav__link">
    <span class="md-ellipsis">
      NodeFactory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="NodeFactory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aact.NodeFactory.registry" class="md-nav__link">
    <span class="md-ellipsis">
      registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.NodeFactory.register" class="md-nav__link">
    <span class="md-ellipsis">
      register
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aact.NodeFactory.make" class="md-nav__link">
    <span class="md-ellipsis">
      make
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Nodes</h1>

<p>AAct nodes are simply classes which inherit from <code>Node</code> and implements different ways of handling and sending messages.</p>


<div class="doc doc-object doc-class">



<h2 id="aact.Node" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">aact.Node</span>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code>, <code><a class="autorefs autorefs-external" title="typing.Generic" href="https://docs.python.org/3/library/typing.html#typing.Generic">Generic</a>[<span title="aact.nodes.base.InputType">InputType</span>, <span title="aact.nodes.base.OutputType">OutputType</span>]</code></p>


        <p>Node is the base class for all nodes in the aact framework. It is a generic class that takes two type parameters:
<code>InputType</code> and <code>OutputType</code>. The InputType and OutputType is used not only for static type checking but also for
runtime message type validation, so it is important that you pass the correct types.</p>
<p>Each of <code>InputType</code> and <code>OutputType</code> can be either:
1. a subclass of <code>aact.messages.DataModel</code>, or
2. a union of multiple <code>aact.DataModel</code> subclasses, or
3. <code>aact.DataModel</code> itself to allow any type of message (not recommended).[^1]</p>
<p>Any subclass of <code>aact.Node</code> must implement the <code>event_handler</code> method, which is the main computation logic of the
node. The <code>event_handler</code> method takes two arguments: <code>input_channel</code> and <code>input_message</code>, and returns an async
iterator of tuples of output channel and output message.</p>
<p>For example, the following code snippet shows a simple node that takes a <code>aact.messages.Text</code> message from the <code>a</code>
channel and echo it to the <code>b</code> channel.</p>
<pre><code class="language-python">from aact import Node, Message
from aact.messages import Text

from typing import AsyncIterator

class EchoNode(Node[Text, Text]):
    def event_handler(self, input_channel: str, input_message: Message[Text]) -&gt; AsyncIterator[str, Message[Text]]:
        yield &quot;b&quot;, Message[Text](data=input_message.data)
</code></pre>
<h4 id="aact.Node--built-in-nodes">Built-in Nodes</h4>
<p>aact provides several built-in nodes that you can use out of the box. Here are some of the built-in nodes:</p>
<ul>
<li><code>aact.nodes.listener.ListenerNode</code>: A node that listens to the audio input from the microphone.</li>
<li><code>aact.nodes.speaker.SpeakerNode</code>: A node that plays the audio output to the speaker.</li>
<li><code>aact.nodes.record.RecordNode</code>: A node that records the messages to a file.</li>
<li><code>aact.nodes.print.PrintNode</code>: A node that prints the messages to the console.</li>
<li><code>aact.nodes.tick.TickNode</code>: A node that sends a tick message at a fixed interval.</li>
<li><code>aact.nodes.random.RandomNode</code>: A node that sends a random number message.</li>
<li><code>aact.nodes.transcriber.TranscriberNode</code>: A node that transcribes the audio messages to text.</li>
<li><code>aact.nodes.tts.TTSNode</code>: A node that converts the text messages to audio.</li>
</ul>
<h4 id="aact.Node--common-usage">Common usage</h4>
<p>The usage of nodes is in the <a href="aact.html/#usage">quick start guide</a>.</p>
<h4 id="aact.Node--advanced-usage">Advanced usage</h4>
<h5 id="aact.Node--send-messages-on-your-own">Send messages on your own</h5>
<p>The default behavior of sending messages in the base Node class is handled in the <code>event_loop</code> method. If you want to
send messages on your own, you can directly use the Redis instance <code>r</code> to publish messages to the output channels.</p>
<pre><code class="language-python">
class YourNode(Node[InputType, OutputType]):

    async def func_where_you_send_messages(self):
        await self.r.publish(your_output_channel, Message[OutputType](data=your_output_message).model_dump_json())

</code></pre>
<h5 id="aact.Node--customize-set-up-and-tear-down">Customize set up and tear down</h5>
<p>You can customize the set up and tear down of the node by overriding the <code>__aenter__</code> and <code>__aexit__</code> methods. For
example, you can open a file in the <code>__aenter__</code> method and close it in the <code>__aexit__</code> method.</p>
<pre><code class="language-python">
class YourNode(Node[InputType, OutputType]):

    async def __aenter__(self) -&gt; Self:
        self.file = open(&quot;your_file.txt&quot;, &quot;w&quot;)
        return await super().__aenter__()

    async def __aexit__(self, exc_type: Any, exc_value: Any, traceback: Any) -&gt; None:
        self.file.close()
        return await super().__aexit__(exc_type, exc_value, traceback)
</code></pre>
<p>This will ensure the file is closed properly even if an exception is raised.</p>
<h5 id="aact.Node--background-tasks">Background tasks</h5>
<p>You can run background tasks in the node by creating a task in the <code>__aenter__</code> method and cancelling it in the
<code>__aexit__</code> method.</p>
<pre><code class="language-python">
class YourNode(Node[InputType, OutputType]):

    async def __aenter__(self) -&gt; Self:

        self.task = asyncio.create_task(self.background_task())
        return await super().__aenter__()

    async def __aexit__(self, exc_type: Any, exc_value: Any, traceback: Any) -&gt; None:
        self.task.cancel()

        try:
            await self.task
        except asyncio.CancelledError:
            pass
</code></pre>
<p>[^1]: Only if you know what you are doing. For example, in the <code>aact.nodes.record.RecordNode</code>, the <code>InputType</code> is
<code>aact.messages.DataModel</code> because it can accept any type of message. But in most cases, you should specify the
<code>InputType</code> and <code>OutputType</code> to be a specific subclass of <code>aact.messages.DataModel</code>.</p>
<h5 id="aact.Node--shutdown-nodes">Shutdown nodes</h5>
<p>The default method for stopping nodes is through shutting down the subprocesses or RQ jobs. When you want to bring
down the dataflow, you can <code>Ctrl + c</code> to turn off the nodes gracefully.</p>
<p>To shutdown a node itself, you can return from its event loop programatically when a certain condition is reached.</p>
<h6 id="aact.Node--experimental-feature-peer-stopping">Experimental feature: Peer-stopping</h6>
<p>An experimental feature is peer-stopping. A node can not only stop itself but also other nodes. To do this, send
a message to the channel <code>f"shutdown:{self.node_name}"</code> and the node manager will shutdown all of the nodes in the
current dataflow.</p>






              <details class="quote">
                <summary>Source code in <code>src/aact/nodes/base.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">InputType</span><span class="p">,</span> <span class="n">OutputType</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Node is the base class for all nodes in the aact framework. It is a generic class that takes two type parameters:</span>
<span class="sd">    `InputType` and `OutputType`. The InputType and OutputType is used not only for static type checking but also for</span>
<span class="sd">    runtime message type validation, so it is important that you pass the correct types.</span>

<span class="sd">    Each of `InputType` and `OutputType` can be either:</span>
<span class="sd">    1. a subclass of `aact.messages.DataModel`, or</span>
<span class="sd">    2. a union of multiple `aact.DataModel` subclasses, or</span>
<span class="sd">    3. `aact.DataModel` itself to allow any type of message (not recommended).[^1]</span>

<span class="sd">    Any subclass of `aact.Node` must implement the `event_handler` method, which is the main computation logic of the</span>
<span class="sd">    node. The `event_handler` method takes two arguments: `input_channel` and `input_message`, and returns an async</span>
<span class="sd">    iterator of tuples of output channel and output message.</span>

<span class="sd">    For example, the following code snippet shows a simple node that takes a `aact.messages.Text` message from the `a`</span>
<span class="sd">    channel and echo it to the `b` channel.</span>

<span class="sd">    ```python</span>
<span class="sd">    from aact import Node, Message</span>
<span class="sd">    from aact.messages import Text</span>

<span class="sd">    from typing import AsyncIterator</span>

<span class="sd">    class EchoNode(Node[Text, Text]):</span>
<span class="sd">        def event_handler(self, input_channel: str, input_message: Message[Text]) -&gt; AsyncIterator[str, Message[Text]]:</span>
<span class="sd">            yield &quot;b&quot;, Message[Text](data=input_message.data)</span>
<span class="sd">    ```</span>

<span class="sd">    ## Built-in Nodes</span>

<span class="sd">    aact provides several built-in nodes that you can use out of the box. Here are some of the built-in nodes:</span>

<span class="sd">    - `aact.nodes.listener.ListenerNode`: A node that listens to the audio input from the microphone.</span>
<span class="sd">    - `aact.nodes.speaker.SpeakerNode`: A node that plays the audio output to the speaker.</span>
<span class="sd">    - `aact.nodes.record.RecordNode`: A node that records the messages to a file.</span>
<span class="sd">    - `aact.nodes.print.PrintNode`: A node that prints the messages to the console.</span>
<span class="sd">    - `aact.nodes.tick.TickNode`: A node that sends a tick message at a fixed interval.</span>
<span class="sd">    - `aact.nodes.random.RandomNode`: A node that sends a random number message.</span>
<span class="sd">    - `aact.nodes.transcriber.TranscriberNode`: A node that transcribes the audio messages to text.</span>
<span class="sd">    - `aact.nodes.tts.TTSNode`: A node that converts the text messages to audio.</span>

<span class="sd">    ## Common usage</span>

<span class="sd">    The usage of nodes is in the [quick start guide](aact.html/#usage).</span>

<span class="sd">    ## Advanced usage</span>

<span class="sd">    ### Send messages on your own</span>

<span class="sd">    The default behavior of sending messages in the base Node class is handled in the `event_loop` method. If you want to</span>
<span class="sd">    send messages on your own, you can directly use the Redis instance `r` to publish messages to the output channels.</span>

<span class="sd">    ```python</span>

<span class="sd">    class YourNode(Node[InputType, OutputType]):</span>

<span class="sd">        async def func_where_you_send_messages(self):</span>
<span class="sd">            await self.r.publish(your_output_channel, Message[OutputType](data=your_output_message).model_dump_json())</span>

<span class="sd">    ```</span>

<span class="sd">    ### Customize set up and tear down</span>

<span class="sd">    You can customize the set up and tear down of the node by overriding the `__aenter__` and `__aexit__` methods. For</span>
<span class="sd">    example, you can open a file in the `__aenter__` method and close it in the `__aexit__` method.</span>

<span class="sd">    ```python</span>

<span class="sd">    class YourNode(Node[InputType, OutputType]):</span>

<span class="sd">        async def __aenter__(self) -&gt; Self:</span>
<span class="sd">            self.file = open(&quot;your_file.txt&quot;, &quot;w&quot;)</span>
<span class="sd">            return await super().__aenter__()</span>

<span class="sd">        async def __aexit__(self, exc_type: Any, exc_value: Any, traceback: Any) -&gt; None:</span>
<span class="sd">            self.file.close()</span>
<span class="sd">            return await super().__aexit__(exc_type, exc_value, traceback)</span>
<span class="sd">    ```</span>

<span class="sd">    This will ensure the file is closed properly even if an exception is raised.</span>

<span class="sd">    ### Background tasks</span>

<span class="sd">    You can run background tasks in the node by creating a task in the `__aenter__` method and cancelling it in the</span>
<span class="sd">    `__aexit__` method.</span>

<span class="sd">    ```python</span>

<span class="sd">    class YourNode(Node[InputType, OutputType]):</span>

<span class="sd">        async def __aenter__(self) -&gt; Self:</span>

<span class="sd">            self.task = asyncio.create_task(self.background_task())</span>
<span class="sd">            return await super().__aenter__()</span>

<span class="sd">        async def __aexit__(self, exc_type: Any, exc_value: Any, traceback: Any) -&gt; None:</span>
<span class="sd">            self.task.cancel()</span>

<span class="sd">            try:</span>
<span class="sd">                await self.task</span>
<span class="sd">            except asyncio.CancelledError:</span>
<span class="sd">                pass</span>
<span class="sd">    ```</span>

<span class="sd">    [^1]: Only if you know what you are doing. For example, in the `aact.nodes.record.RecordNode`, the `InputType` is</span>
<span class="sd">    `aact.messages.DataModel` because it can accept any type of message. But in most cases, you should specify the</span>
<span class="sd">    `InputType` and `OutputType` to be a specific subclass of `aact.messages.DataModel`.</span>

<span class="sd">    ### Shutdown nodes</span>

<span class="sd">    The default method for stopping nodes is through shutting down the subprocesses or RQ jobs. When you want to bring</span>
<span class="sd">    down the dataflow, you can `Ctrl + c` to turn off the nodes gracefully.</span>

<span class="sd">    To shutdown a node itself, you can return from its event loop programatically when a certain condition is reached.</span>

<span class="sd">    #### Experimental feature: Peer-stopping</span>

<span class="sd">    An experimental feature is peer-stopping. A node can not only stop itself but also other nodes. To do this, send</span>
<span class="sd">    a message to the channel `f&quot;shutdown:{self.node_name}&quot;` and the node manager will shutdown all of the nodes in the</span>
<span class="sd">    current dataflow.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">input_channel_types</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">InputType</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A dictionary that maps the input channel names to the corresponding input message types.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">output_channel_types</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">OutputType</span><span class="p">]]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A dictionary that maps the output channel names to the corresponding output message types.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">node_name</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The name of the node. When using NodeManger, the node name should be unique.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">redis_url</span><span class="p">:</span> <span class="nb">str</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The URL of the Redis server. It should be in the format of `redis://&lt;host&gt;:&lt;port&gt;/&lt;db&gt;`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="s2">&quot;allow&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    @private</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">input_channel_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">InputType</span><span class="p">]]],</span>
        <span class="n">output_channel_types</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">[</span><span class="n">OutputType</span><span class="p">]]],</span>
        <span class="n">node_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">redis_url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;redis://localhost:6379/0&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">input_channel_type</span> <span class="ow">in</span> <span class="n">input_channel_types</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">input_channel_type</span><span class="p">,</span> <span class="n">DataModel</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Input channel type </span><span class="si">{</span><span class="n">input_channel_type</span><span class="si">}</span><span class="s2"> is not a subclass of DataModel&quot;</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="n">input_channel_type</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="s2">&quot;data_type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span>  <span class="c1"># type: ignore[comparison-overlap]</span>
                    <span class="o">==</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The input channel type </span><span class="si">{</span><span class="n">input_channel_type</span><span class="si">}</span><span class="s2"> needs to be registered with `@DataModelFactory.register`&quot;</span>
                    <span class="p">)</span>
            <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">output_channel_type</span> <span class="ow">in</span> <span class="n">output_channel_types</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">output_channel_type</span><span class="p">,</span> <span class="n">DataModel</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Output channel type </span><span class="si">{</span><span class="n">output_channel_type</span><span class="si">}</span><span class="s2"> is not a subclass of DataModel&quot;</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="n">output_channel_type</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="s2">&quot;data_type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span>  <span class="c1"># type: ignore[comparison-overlap]</span>
                    <span class="o">==</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">]</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;The output channel type </span><span class="si">{</span><span class="n">output_channel_type</span><span class="si">}</span><span class="s2"> needs to be registered with `@DataModelFactory.register`&quot;</span>
                    <span class="p">)</span>
            <span class="n">BaseModel</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">input_channel_types</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">input_channel_types</span><span class="p">),</span>
                <span class="n">output_channel_types</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">output_channel_types</span><span class="p">),</span>
                <span class="n">node_name</span><span class="o">=</span><span class="n">node_name</span><span class="p">,</span>
                <span class="n">redis_url</span><span class="o">=</span><span class="n">redis_url</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">NodeConfigurationError</span><span class="p">(</span>
                <span class="s2">&quot;You passed an invalid configuration to the Node.</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;The required input channel types are: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="s1">&#39;input_channel_types&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;The input channel types are: </span><span class="si">{</span><span class="n">input_channel_types</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;The required output channel types are: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">model_fields</span><span class="p">[</span><span class="s1">&#39;output_channel_types&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">annotation</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="sa">f</span><span class="s2">&quot;The output channel types are: </span><span class="si">{</span><span class="n">output_channel_types</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">:</span> <span class="n">Redis</span> <span class="o">=</span> <span class="n">Redis</span><span class="o">.</span><span class="n">from_url</span><span class="p">(</span><span class="n">redis_url</span><span class="p">)</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @private</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pubsub</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">pubsub</span><span class="p">()</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @private</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;aact.nodes.base.Node&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @private</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_background_tasks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="n">asyncio</span><span class="o">.</span><span class="n">Task</span><span class="p">[</span><span class="kc">None</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aenter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">ping</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">ConnectionError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Could not connect to Redis with the provided url. </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">redis_url</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">pubsub</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">input_channel_types</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_background_tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_send_heartbeat</span><span class="p">()))</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">async</span> <span class="k">def</span> <span class="fm">__aexit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">__</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">___</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_background_tasks</span><span class="p">:</span>
            <span class="n">task</span><span class="o">.</span><span class="n">cancel</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">await</span> <span class="n">task</span>
            <span class="k">except</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">CancelledError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">pubsub</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">()</span>
        <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">aclose</span><span class="p">()</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_send_heartbeat</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;heartbeat:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">node_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">Message</span><span class="p">[</span><span class="n">Tick</span><span class="p">](</span><span class="n">data</span><span class="o">=</span><span class="n">Tick</span><span class="p">(</span><span class="n">tick</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">(),</span>
            <span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">_wait_for_input</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Message</span><span class="p">[</span><span class="n">InputType</span><span class="p">]]]:</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pubsub</span><span class="o">.</span><span class="n">listen</span><span class="p">():</span>
            <span class="n">channel</span> <span class="o">=</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;channel&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;message&quot;</span> <span class="ow">and</span> <span class="n">channel</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">input_channel_types</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">Message</span><span class="p">[</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">input_channel_types</span><span class="p">[</span><span class="n">channel</span><span class="p">]</span>  <span class="c1"># type: ignore[name-defined]</span>
                    <span class="p">]</span><span class="o">.</span><span class="n">model_validate_json</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])</span>
                <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Failed to validate message from </span><span class="si">{</span><span class="n">channel</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">message</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">. Error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">raise</span> <span class="n">e</span>
                <span class="k">yield</span> <span class="n">channel</span><span class="p">,</span> <span class="n">data</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Input channel closed unexpectedly&quot;</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">event_loop</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The main event loop of the node.</span>
<span class="sd">        The default implementation of the event loop is to wait for input messages from the input channels and call the</span>
<span class="sd">        `event_handler` method for each input message, and send each output message to the corresponding output channel.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">input_channel</span><span class="p">,</span> <span class="n">input_message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_input</span><span class="p">():</span>
                <span class="k">async</span> <span class="k">for</span> <span class="n">output_channel</span><span class="p">,</span> <span class="n">output_message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handler</span><span class="p">(</span>
                    <span class="n">input_channel</span><span class="p">,</span> <span class="n">input_message</span>
                <span class="p">):</span>
                    <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                        <span class="n">output_channel</span><span class="p">,</span> <span class="n">output_message</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>
                    <span class="p">)</span>
        <span class="k">except</span> <span class="n">NodeExitSignal</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Event loop cancelled: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Exiting gracefully.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">e</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">__</span><span class="p">:</span> <span class="n">Message</span><span class="p">[</span><span class="n">InputType</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Message</span><span class="p">[</span><span class="n">OutputType</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        @private</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;event_handler must be implemented in a subclass.&quot;</span><span class="p">)</span>
        <span class="k">yield</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_type</span><span class="p">()</span>  <span class="c1"># unreachable: dummy return value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.input_channel_types" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">input_channel_types</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">input_channel_types</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/expressions.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Type" href="https://docs.python.org/3/library/typing.html#typing.Type">Type</a></span><span class="p">[</span><span class="n"><span title="aact.nodes.base.InputType">InputType</span></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A dictionary that maps the input channel names to the corresponding input message types.</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.output_channel_types" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">output_channel_types</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">output_channel_types</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/expressions.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Type" href="https://docs.python.org/3/library/typing.html#typing.Type">Type</a></span><span class="p">[</span><span class="n"><span title="aact.nodes.base.OutputType">OutputType</span></span><span class="p">]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>A dictionary that maps the output channel names to the corresponding output message types.</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.node_name" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">node_name</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">node_name</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The name of the node. When using NodeManger, the node name should be unique.</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.redis_url" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">redis_url</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">redis_url</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The URL of the Redis server. It should be in the format of <code>redis://&lt;host&gt;:&lt;port&gt;/&lt;db&gt;</code>.</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.model_config" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">model_config</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">model_config</span> <span class="o">=</span> <span class="n"><span title="pydantic.ConfigDict">ConfigDict</span></span><span class="p">(</span><span class="n"><span title="pydantic.ConfigDict(extra)">extra</span></span><span class="o">=</span><span class="s1">&#39;allow&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.r" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">r</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">r</span><span class="p">:</span> <span class="n"><span title="redis.asyncio.Redis">Redis</span></span> <span class="o">=</span> <span class="n"><span title="redis.asyncio.Redis.from_url">from_url</span></span><span class="p">(</span><span class="n"><a class="autorefs autorefs-internal" title="aact.nodes.base.Node.redis_url" href="#aact.Node.redis_url">redis_url</a></span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.pubsub" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">pubsub</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">pubsub</span> <span class="o">=</span> <span class="n"><span title="self.r.pubsub">pubsub</span></span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>
    </div>

</div>






<div class="doc doc-object doc-attribute">



<h3 id="aact.Node.logger" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">logger</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">logger</span> <span class="o">=</span> <span class="n"><a class="autorefs autorefs-external" title="logging.getLogger" href="https://docs.python.org/3/library/logging.html#logging.getLogger">getLogger</a></span><span class="p">(</span><span class="s1">&#39;aact.nodes.base.Node&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>
    </div>

</div>






<div class="doc doc-object doc-function">


<h3 id="aact.Node.event_loop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">event_loop</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">event_loop</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>The main event loop of the node.
The default implementation of the event loop is to wait for input messages from the input channels and call the
<code>event_handler</code> method for each input message, and send each output message to the corresponding output channel.</p>

            <details class="quote">
              <summary>Source code in <code>src/aact/nodes/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span> <span class="nf">event_loop</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The main event loop of the node.</span>
<span class="sd">    The default implementation of the event loop is to wait for input messages from the input channels and call the</span>
<span class="sd">    `event_handler` method for each input message, and send each output message to the corresponding output channel.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">input_channel</span><span class="p">,</span> <span class="n">input_message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wait_for_input</span><span class="p">():</span>
            <span class="k">async</span> <span class="k">for</span> <span class="n">output_channel</span><span class="p">,</span> <span class="n">output_message</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">event_handler</span><span class="p">(</span>
                <span class="n">input_channel</span><span class="p">,</span> <span class="n">input_message</span>
            <span class="p">):</span>
                <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span>
                    <span class="n">output_channel</span><span class="p">,</span> <span class="n">output_message</span><span class="o">.</span><span class="n">model_dump_json</span><span class="p">()</span>
                <span class="p">)</span>
    <span class="k">except</span> <span class="n">NodeExitSignal</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Event loop cancelled: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">. Exiting gracefully.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">e</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>






<div class="doc doc-object doc-function">


<h3 id="aact.Node.event_handler" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">event_handler</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">event_handler</span><span class="p">(</span><span class="n">_</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n">__</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-internal" title="aact.messages.Message" href="../messages/#aact.Message">Message</a></span><span class="p">[</span><span class="n"><span title="aact.nodes.base.InputType">InputType</span></span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.AsyncIterator" href="https://docs.python.org/3/library/typing.html#typing.AsyncIterator">AsyncIterator</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#tuple">tuple</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="aact.messages.Message" href="../messages/#aact.Message">Message</a></span><span class="p">[</span><span class="n"><span title="aact.nodes.base.OutputType">OutputType</span></span><span class="p">]]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>

            <details class="quote">
              <summary>Source code in <code>src/aact/nodes/base.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">event_handler</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">_</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">__</span><span class="p">:</span> <span class="n">Message</span><span class="p">[</span><span class="n">InputType</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AsyncIterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Message</span><span class="p">[</span><span class="n">OutputType</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    @private</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;event_handler must be implemented in a subclass.&quot;</span><span class="p">)</span>
    <span class="k">yield</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">output_type</span><span class="p">()</span>  <span class="c1"># unreachable: dummy return value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="aact.NodeFactory" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">aact.NodeFactory</span>


</h2>


    <div class="doc doc-contents first">


        <p>To use nodes in the dataflow, you need to register them in the NodeFactory before using them.
The reason for this is to allow users write string names in toml files which can be converted
to actual classes at runtime.</p>
<p>To register a node, you need to use the <code>@NodeFactory.register</code> decorator.</p>
<p>Example:</p>
<pre><code class="language-python">from aact import Node, NodeFactory

@NodeFactory.register(&quot;node_name&quot;)
class YourNode(Node[your_input_type, your_output_type]):
    # Your implementation of the node
</code></pre>
<details>

<summary> For power users </summary>

You can initialize a node using the `NodeFactory.make` method.


<pre><code class="language-python">from aact import NodeFactory

node = NodeFactory.make(&quot;node_name&quot;, ...)# your arguments
</code></pre>









  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="aact.NodeFactory.registry" class="doc doc-heading">
            <span class="doc doc-object-name doc-attribute-name">registry</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="n">registry</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/reference/expressions.html#dict">dict</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/glossary.html#term-type">type</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="aact.nodes.base.Node" href="#aact.Node">Node</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="aact.messages.base.DataModel" href="../messages/#aact.messages.DataModel">DataModel</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="aact.messages.base.DataModel" href="../messages/#aact.messages.DataModel">DataModel</a></span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="aact.NodeFactory.register" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">register</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">register</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Callable" href="https://docs.python.org/3/library/typing.html#typing.Callable">Callable</a></span><span class="p">[[</span><span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/glossary.html#term-type">type</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="aact.nodes.base.Node" href="#aact.Node">Node</a></span><span class="p">[</span><span class="n"><span title="aact.nodes.registry.InputType">InputType</span></span><span class="p">,</span> <span class="n"><span title="aact.nodes.registry.OutputType">OutputType</span></span><span class="p">]]],</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/glossary.html#term-type">type</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="aact.nodes.base.Node" href="#aact.Node">Node</a></span><span class="p">[</span><span class="n"><span title="aact.nodes.registry.InputType">InputType</span></span><span class="p">,</span> <span class="n"><span title="aact.nodes.registry.OutputType">OutputType</span></span><span class="p">]]]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>

            <details class="quote">
              <summary>Source code in <code>src/aact/nodes/registry.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">register</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Callable</span><span class="p">[</span>
    <span class="p">[</span><span class="nb">type</span><span class="p">[</span><span class="n">Node</span><span class="p">[</span><span class="n">InputType</span><span class="p">,</span> <span class="n">OutputType</span><span class="p">]]],</span> <span class="nb">type</span><span class="p">[</span><span class="n">Node</span><span class="p">[</span><span class="n">InputType</span><span class="p">,</span> <span class="n">OutputType</span><span class="p">]]</span>
<span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    @private</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">inner_wrapper</span><span class="p">(</span>
        <span class="n">wrapped_class</span><span class="p">:</span> <span class="nb">type</span><span class="p">[</span><span class="n">Node</span><span class="p">[</span><span class="n">InputType</span><span class="p">,</span> <span class="n">OutputType</span><span class="p">]],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">type</span><span class="p">[</span><span class="n">Node</span><span class="p">[</span><span class="n">InputType</span><span class="p">,</span> <span class="n">OutputType</span><span class="p">]]:</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">registry</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Executor </span><span class="si">%s</span><span class="s2"> already exists. Will replace it&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">wrapped_class</span>
        <span class="k">return</span> <span class="n">wrapped_class</span>

    <span class="k">return</span> <span class="n">inner_wrapper</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="aact.NodeFactory.make" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">make</span>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">make</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" href="https://docs.python.org/3/library/stdtypes.html#str">str</a></span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n"><a class="autorefs autorefs-external" title="typing.Any" href="https://docs.python.org/3/library/typing.html#typing.Any">Any</a></span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n"><a class="autorefs autorefs-internal" title="aact.nodes.base.Node" href="#aact.Node">Node</a></span><span class="p">[</span><span class="n"><a class="autorefs autorefs-internal" title="aact.messages.base.DataModel" href="../messages/#aact.messages.DataModel">DataModel</a></span><span class="p">,</span> <span class="n"><a class="autorefs autorefs-internal" title="aact.messages.base.DataModel" href="../messages/#aact.messages.DataModel">DataModel</a></span><span class="p">]</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>@private</p>

            <details class="quote">
              <summary>Source code in <code>src/aact/nodes/registry.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">make</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Node</span><span class="p">[</span><span class="n">DataModel</span><span class="p">,</span> <span class="n">DataModel</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    @private</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">registry</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executor </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found in registry&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">registry</span><span class="p">[</span><span class="n">name</span><span class="p">](</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>







  
  



  



  <form class="md-feedback" name="feedback" hidden>
    <fieldset>
      <legend class="md-feedback__title">
        Was this page helpful?
      </legend>
      <div class="md-feedback__inner">
        <div class="md-feedback__list">
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page was helpful" data-md-value="1">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 9v12H1V9zm4 12a2 2 0 0 1-2-2V9c0-.55.22-1.05.59-1.41L14.17 1l1.06 1.06c.27.27.44.64.44 1.05l-.03.32L14.69 8H21a2 2 0 0 1 2 2v2c0 .26-.05.5-.14.73l-3.02 7.05C19.54 20.5 18.83 21 18 21zm0-2h9.03L21 12v-2h-8.79l1.13-5.32L9 9.03z"/></svg>
            </button>
          
            <button class="md-feedback__icon md-icon" type="submit" title="This page could be improved" data-md-value="0">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 15V3h4v12zM15 3a2 2 0 0 1 2 2v10c0 .55-.22 1.05-.59 1.41L9.83 23l-1.06-1.06c-.27-.27-.44-.64-.44-1.06l.03-.31.95-4.57H3a2 2 0 0 1-2-2v-2c0-.26.05-.5.14-.73l3.02-7.05C4.46 3.5 5.17 3 6 3zm0 2H5.97L3 12v2h8.78l-1.13 5.32L15 14.97z"/></svg>
            </button>
          
        </div>
        <div class="md-feedback__note">
          
            <div data-md-value="1" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
            <div data-md-value="0" hidden>
              
              
                
              
              Thanks for your feedback!
            </div>
          
        </div>
      </div>
    </fieldset>
  </form>


                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.tabs.link", "content.code.annotate", "content.code.copy", "announce.dismiss", "navigation.tabs", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.preview", "navigation.instant.progress", "navigation.path", "navigation.sections", "navigation.top", "navigation.tracking", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>